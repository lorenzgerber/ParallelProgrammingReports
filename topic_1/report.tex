\documentclass[a4paper,11pt,twoside]{article}
%\documentclass[a4paper,11pt,twoside,se]{article}

\usepackage{UmUStudentReport}
\usepackage{verbatim}   % Multi-line comments using \begin{comment}
\usepackage{courier}    % Nicer fonts are used. (not necessary)
\usepackage{pslatex}    % Also nicer fonts. (not necessary)
\usepackage[pdftex]{graphicx}   % allows including pdf figures
\usepackage{listings}
\usepackage{pgf-umlcd}
\usepackage{blindtext}
\usepackage{enumitem}
%\usepackage{lmodern}   % Optional fonts. (not necessary)
%\usepackage{tabularx}
%\usepackage{microtype} % Provides some typographic improvements over default settings
%\usepackage{placeins}  % For aligning images with \FloatBarrier
%\usepackage{booktabs}  % For nice-looking tables
%\usepackage{titlesec}  % More granular control of sections.

% DOCUMENT INFO
% =============
\department{Department of Computing Science}
\coursename{Parallel Programming 7.5 p}
\coursecode{5DV152}
\title{Exercises, Chapter/Topic 1}
\author{Lorenz Gerber ({\tt{dv15lgr@cs.umu.se}} {\tt{lozger03@student.umu.se}})}
\date{2017-01-26}
%\revisiondate{2016-01-18}
\instructor{Lars Karlsson / Mikael RÃ¤nner}


% DOCUMENT SETTINGS
% =================
\bibliographystyle{plain}
%\bibliographystyle{ieee}
\pagestyle{fancy}
\raggedbottom
\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{2}
%\graphicspath{{images/}}   %Path for images

\usepackage{float}
\floatstyle{ruled}
\newfloat{listing}{thp}{lop}
\floatname{listing}{Listing}



% DEFINES
% =======
%\newcommand{\mycommand}{<latex code>}

% DOCUMENT
% ========
\begin{document}
\lstset{language=C}
\maketitle
\thispagestyle{empty}
\newpage
\tableofcontents
\thispagestyle{empty}
\newpage

\clearpage
\pagenumbering{arabic}

\section{Introduction}
This report is part of the mandatory coursework. It describes the solutions for several chosen exercises from the course book \cite{pacheco2011}.
\section{1.1 - Formulas for block partitioning}
The overwhelming idea is to load balance \verb+p+ number of cores with \verb+n+ tasks. Here, we use two functions to obtain block partitioning using a \verb+for loop+ :
\begin{verbatim}
for (my_i = my_first_i; my_i < my_last_i; my_i++)
\end{verbatim}

The functions \verb+my_first_i+ and \verb+my_last_i+ are used to set the limits in the loop. Besides \verb+n, i and p+ we also need an index for the actual core: \verb+k+. It is understood that indicies \verb+i+ and \verb+k+ start at \verb+0+. The book text hints to start with the case when \verb+n+ is evenly divisible by \verb+p+:
\begin{verbatim}
my_first_i = k * n / p
my_last_i = (k + 1) * n / p
\end{verbatim}
Testing this expression for \verb!n = 10, p = 5, k = {0, 1, ..., 4}! seems to be correct. Now when  \verb+n+ is not even divisible by \verb+p+, one has to distribute the \verb+n mod p+ tasks for example on the first \verb+n mod p+ cores:
\begin{verbatim}
my_first_i = k * n / p + ( k < n mod p ? k : n mod p )
my_last_i = (k + 1) * n / p + (k + 1 < n mod p ? k + 1 : n mod p)  
\end{verbatim}
Testing this expression for \verb!n = 9, p = 5, k = {0, 1, ..., 4}! gives the correct results.
  
\section{1.2 - Modify 1.1 with non-uniform costs}
The calls happen in parallel. It can be still assumed that \verb+k = 0+ will get the first call, \verb+k = 1+ the second and so on. However, this doesn't really matter as the processing time increases monotonously. Hence the solution in \textit{1.1} will still provide the correct solution. 

\section{1.3 - Tree-structured global sum}

\begin{verbatim}
divisor = 2
core_diff = 1

while(core_diff < p){
    if(k % divisor == 0)
        receive and add from k + core_diff
    else if (k % divisor == divisor / 2)
        send to k - core_diff

    divisor * 2
    core_diff * 2
}

if( k == 0 )
    return final result
\end{verbatim}

\section{1.4 - Alternative algorithm for 1.3}

\section{1.5 - Generalization of 1.3 and 1.4}

\section{1.6 - Cost anlaysis of global sum algorithms}


\addcontentsline{toc}{section}{\refname}
\bibliography{references}

\end{document}
