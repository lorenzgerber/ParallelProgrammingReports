\documentclass[a4paper,11pt,twoside]{article}
%\documentclass[a4paper,11pt,twoside,se]{article}

\usepackage{UmUStudentReport}
\usepackage{verbatim}   % Multi-line comments using \begin{comment}
\usepackage{courier}    % Nicer fonts are used. (not necessary)
\usepackage{pslatex}    % Also nicer fonts. (not necessary)
\usepackage[pdftex]{graphicx}   % allows including pdf figures
\usepackage{listings}
\usepackage{pgf-umlcd}
\usepackage{blindtext}
\usepackage{enumitem}
%\usepackage{lmodern}   % Optional fonts. (not necessary)
%\usepackage{tabularx}
%\usepackage{microtype} % Provides some typographic improvements over default settings
%\usepackage{placeins}  % For aligning images with \FloatBarrier
%\usepackage{booktabs}  % For nice-looking tables
%\usepackage{titlesec}  % More granular control of sections.

% DOCUMENT INFO
% =============
\department{Department of Computing Science}
\coursename{Parallel Programming 7.5 p}
\coursecode{5DV152}
\title{Exercises, Chapter/Topic 1}
\author{Lorenz Gerber ({\tt{dv15lgr@cs.umu.se}} {\tt{lozger03@student.umu.se}})}
\date{2017-02-16}
%\revisiondate{2016-01-18}
\instructor{Lars Karlsson / Mikael RÃ¤nner}


% DOCUMENT SETTINGS
% =================
\bibliographystyle{plain}
%\bibliographystyle{ieee}
\pagestyle{fancy}
\raggedbottom
\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{2}
%\graphicspath{{images/}}   %Path for images

\usepackage{float}
\floatstyle{ruled}
\newfloat{listing}{thp}{lop}
\floatname{listing}{Listing}



% DEFINES
% =======
%\newcommand{\mycommand}{<latex code>}

% DOCUMENT
% ========
\begin{document}
\lstset{language=C}
\maketitle
\thispagestyle{empty}
\newpage
\tableofcontents
\thispagestyle{empty}
\newpage

\clearpage
\pagenumbering{arabic}

\section{Introduction}
This report is part of the mandatory coursework. It describes the solutions for several chosen exercises from the course book \cite{pacheco2011}.

\section{3.2 - Generalization of algorithm for trapezoidal rule}
Two functions to adapt the \textit{trapezoidal rule} for \verb+calc\_local\_a+ and \verb+calc\_local\_b+ were written and tested with the source code from the book (\textit{mpi\_trap.c}).

\begin{verbatim}
double calc_local_a(int my_rank, double a, double b, int n, int comm_sz){
  double local_a = 0;
  double h = 0;
  int local_n = 0;
  int rest_n  = 0;

  h = (b-a)/n;
  local_n = n/comm_sz;

  rest_n = n%comm_sz;

  if(my_rank < rest_n){
    local_a = a + my_rank*local_n*h + my_rank*h;
  } else {
    local_a = a + my_rank*local_n*h + rest_n*h;
    local_a += (my_rank-rest_n) * h;
  }

  return local_a;

}


double calc_local_b(int my_rank, double a, double b, int n, int comm_sz){
  double h;
  int local_n;

  h = (b-a)/n;
  local_n = n/comm_sz;

  if (my_rank == (comm_sz-1)){
    return a + my_rank+1*local_n*h;
  } else {
    return calc_local_a(my_rank+1, a, b, n, comm_sz);
  }
}

\end{verbatim}

\section{3.6 - Array distributions}
Given is a vector \verb+x+ of length \verb+n+ with the indices \verb+i+. The number of processes used is \verb+comm_sz+ and the index of the current process is \verb+my_rank+. 

\subsection{Block distribution}
For a block distribution, we devise the functions \verb+local_start_i+ and \verb+local_end_i+. These can be used in \verb+for loop+. 

\begin{verbatim}
local_start_i:
my_rank * n / comm_sz + (my_rank < n mod comm_sz ? my_rank : n mod comm_sz)
\end{verbatim}
\begin{verbatim}
local_end_i:
(my_rank + 1) * n / comm_sz + (my_rank + 1 < n mod comm_sz ? my_rank + 1 : n mod comm_sz)
\end{verbatim}

\subsection{Cyclic distribution}
For cyclic distribution, also \verb+local_start_i+ and \verb+local_end_i+ will be determined. They can be used in a \verb+for loop+ with step size \verb+comm_sz+.


\subsection{Block cyclic distribution}
For block cyclic distribution, \verb+local_start_i+ and \verb+local_end_i+ are used with an interleaved double \verb+for loop+.  The outer loop will use the above mentioned functions with a step-size of \verb+comm_sz * block_size+. The inner loop will start at \verb+local_start_i+ until \verb+local_start_i + block_size+ or \verb+n+, whichever is smaller.


\section{3.8 - Tree-structured algorithms for scatter and gather}

\section{3.9 - Vector scaling and dot product}
takes a while to solve,
requires programming

\section{3.11 - Prefix sums}
takes a qhile to solve
requires programming

\section{3.13 - Generalization of vector scaling and dot product}

\section{3.16 - Diagram for a butterfly implementation of allgather}

\section{3.18 - Derived data types}
takes a while to solve
requires programming

\section{3.20 - Pack and unpack}
requires programming


\section{3.21 - Matrix-vector multiplication}
takes a while to solve
requires programming
requires testing

\section{3.22 - Timing the trapezoidal rule}
takes a while to solve
Requires programming
requires testing

\section{3.27 - Speedup and efficienciy of odd-even sort}


\addcontentsline{toc}{section}{\refname}
\bibliography{references}

\end{document}
